<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  

 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <!-- script src="bootsrap-modal.js"></script> --> 
        <link rel="stylesheet" type="text/css" href="/static/css/home.css" />
        <script>
        $(document).ready(function(){
        	var currentComment = false;
		
			$('.postPrompt').focus(function(){
				if (this.value == "Post new message") {
					$('textarea').css("height", "40px");
					$('.submitButton').css("display", "inline");
					$('textarea').css("color", "black");
					$('textarea').attr("value", "");
				}
			});
			
			/*$('textarea').blur(function(){
			   if (this.value == "") {
					$('textarea').css("height", "20px");
					$('.submitButton').css("display", "none");
					$('textarea').css("color", "#ccc");
					$('textarea').attr("value", "Post new message");
				}
			});*/
		
			
		
		
			$('.content-container').click(function(event){
				var target = event.target;
				/*if(currentComment!=false && currentContainer != this){
					currentComment.css("display", "none");
				
				} */
				
				currentContainer = this;
				currentComment = $('.commentBox', this);
				
				if($(target).is(".action")){
					$('.commentBox', this).css("display", "block");
				}
				
				
			
			});
			
			/*$('.content-container').hover(function(){
				$(this).css("background", "#f2f2f2");
			
			}, function(){
				$(this).css("background", "none");
			
			}); */
			
		
			$('form').keypress(function(e){
				if (e.which == 13){
					e.preventDefault();
					this.submit();
				}
			
			}); 
			
	
			
        });
        
        
        
        </script>
        
        
</head>

<body>
  
 <!-- <div id="navigation">
    <div id="top">
      
      <div class="smallItem">
	Logout
	</div>
      
      <div class="smallItem">
	Directory
	</div>
      
      
      
      <img src= {{curUser.pic}} /> 
      <div class="topName"> {{ curUser.firstname}} {{ curUser.lastname }}</div>
      </div>
    </div>-->
  {% include 'nav.html' %}
  <div class="break">
    
    </div>

  <div id="container">
    
    


    
    
    
    <div class="heading">
      Feed
      </div>
    
    <div id="header">
      
      
      <form action="/post/" method="post">
                 {% csrf_token %}
		 <textarea name="text" class="postPrompt">Post new message</textarea>
		 <button class="submitButton">
		   POST
		   </button>
		  </form>
      </div>
    
    {% for post in post_list %}
    <div class="content-container">
      <div class='post'>
        <form action="/deletePost/" method="post">
          {% csrf_token %}
          {% if post.author == curUser or curUser.admin == 'BAMF'%}
          <button class="deleteButton">
            X
          </button>
          {% endif %}   
          <input type="hidden" name="post" value={{ post.pk }} />
          
           </form>
	  <img src={{post.author.pic}} />
	  <div class="author">
            {{ post.author.firstname }} {{ post.author.lastname }} 
	  </div>
          <div class="posttext">
	    {{post.text|linebreaksbr}} 
	  </div>
        
        <div class="postActions">
        	
        		<span class="action">
        		Comment
        	</span>
        </div>
        
        
        
        <div class="commentBox">
        
            <form action="/postComment/" method="post">
          {% csrf_token %}
			<input type="hidden" name="parentPost" value={{ post.pk }} />
        	<textarea class="commentPrompt" name="commenttext"> </textarea>
        
        	</form>
        	
        {% for comment in comment_list %}
        	<div class="comment">
        		<div class="commentAuthor">
        			{{ comment.author.firstname }} {{ comment.author.lastname }}
        		</div>
        		<div class="commentText">
        			{{ comment.text }} parent: {{ comment.parent.text }}
        		</div>
        	</div>
        {% endfor %}
        
        </div>
        
      </div>
     
    </div>
    {% endfor %}
    
    
    
    </div>
</body>
</html>
